<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body{
            text-align: center;
            margin-top: 100px;
        }
        input{
            padding: 8px;
            border-radius: 8px;
            border: 1px solid gray;
            outline: none;
            box-shadow: 3px 3px 5px gray;
        }
        button{
            color: white;
            border-radius: 5px;
            background-color: green;
            padding: 8px;
            cursor: pointer;
            outline: none;
            border: 0;
            box-shadow: 3px 3px 5px gray;
        }
    </style>
</head>
<body>
    <input id="result">
    <input type="text" id="fname" placeholder="enter first name"><br><br>
    <input type="text" id="lname" placeholder="enter lname"><br><br>
    <input type="text" id="pwd" placeholder="enter a pwd"><br><br>
    <input type="text" id="pin-code" placeholder="enter a pin pin-code"><br><br>
    <button onclick="submit()">submit</button>
    <button onclick="clear()">clear</button>
    <br><br><br><br>
    <table id="table" class="table">
        <thead>
          <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>password</th>
            <th>pin-code</th>
          </tr>
        </thead>
        <tbody id="tbl_data">
           
         
        </tbody>
      </table>
<script>
//     var taskData = [];
// var i = null;
// function Submit() {
//   if (taskData.length > 0) {
//     var fname = document.getElementById('fname').value;
//     var lname = document.getElementById('lname').value;
//     var dob = document.getElementById("pwd").value;
//     var dob = document.getElementById("pin-code").value;
//     const obj = {"fname": fname, "lname": lname, "pwd": pwd,"pin-code":pin-code};
//     var stored = JSON.parse(localStorage.getItem("task")) || [];
//     stored.push(obj);
//     localStorage.setItem("task", JSON.stringify(stored));
//   }
//   var fname = document.getElementById('fname').value;
//   var lname = document.getElementById('lname').value;
//   var dob = document.getElementById("pwd").value;
//   var dob = document.getElementById("pin-code").value;
//   const obj = {"fname": fname, "lname": lname, "pwd": pwd,"pin-code":pin-code};
//   taskData.push(obj);

//   localStorage.setItem("task", JSON.stringify(taskData));
//   document.getElementById("result").innerHTML = localStorage.getItem("task");

//   if (i === null) {
//     i = 0;
//   }

//   var table = document.getElementById("table");
//   for (i = i; i < taskData.length; ++i) {
//     var row = table.insertRow();
//     row.insertCell(0).innerHTML = i + 1;
//     row.insertCell(1).innerHTML = taskData[i].fname;
//     row.insertCell(2).innerHTML = taskData[i].lname;
//     row.insertCell(3).innerHTML = taskData[i].pwd;
//     row.insertCell(3).innerHTML = taskData[i].pin-code;
//     i = i;
//   }
// }

// function Clear() {
//   localStorage.clear();
//   taskData = [];
//   i = null;
//   document.getElementById("table").getElementsByTagName('tbody')[0].innerHTML = "";
// }
// Define an empty array to store task data
var taskData = [];

// Define a variable to keep track of the last inserted row index
var lastRowIndex = null;

// Function to submit the form data
function Submit() {
  // Get the form data
  var fname = document.getElementById('fname').value;
  var lname = document.getElementById('lname').value;
  var dob = document.getElementById("dob").value;
  var pincode = document.getElementById("pincode").value;

  // Create a task object with the form data
  const obj = {"fname": fname, "lname": lname, "dob": dob, "pincode": pincode};

  // Add the task object to the taskData array
  taskData.push(obj);

  // Save the taskData array to local storage
  localStorage.setItem("taskData", JSON.stringify(taskData));

  // Update the task table
  var table = document.getElementById("table");
  var row = table.insertRow();
  row.insertCell(0).innerHTML = taskData.length;
  row.insertCell(1).innerHTML = fname;
  row.insertCell(2).innerHTML = lname;
  row.insertCell(3).innerHTML = dob;
  row.insertCell(4).innerHTML = pincode;

  // Update the lastRowIndex variable
  lastRowIndex = table.rows.length - 1;
}

// Function to clear the table and local storage
function Clear() {
  localStorage.clear();
  taskData = [];
  lastRowIndex = null;
  var table = document.getElementById("table");
  table.deleteTBody();
}

// Function to load the task table from local storage
function LoadTable() {
  var storedData = JSON.parse(localStorage.getItem("taskData")) || [];
  taskData = storedData;

  var table = document.getElementById("table");
  for (var i = 0; i < taskData.length; i++) {
    var row = table.insertRow();
    row.insertCell(0).innerHTML = i + 1;
    row.insertCell(1).innerHTML = taskData[i].fname;
    row.insertCell(2).innerHTML = taskData[i].lname;
    row.insertCell(3).innerHTML = taskData[i].dob;
    row.insertCell(4).innerHTML = taskData[i].pincode;

    // Update the lastRowIndex variable
    lastRowIndex = table.rows.length - 1;
  }
}

// Load the task table on page load
window.onload = function() {
  LoadTable();
};

</script>
</body>
</html>